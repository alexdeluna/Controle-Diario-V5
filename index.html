<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Controle Di√°rio V5</title>
	<link rel="stylesheet" href="visual.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#000000">

  <!-- Links COMPLETOS para as bibliotecas de exporta√ß√£o (CORRE√á√ÉO AQUI) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <style>
    body {
  font-family: sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(180deg, #121826, #1b2336);
}

/* Container principal */
.app {
  max-width: 500px;
  margin: 0 auto;
  min-height: 100vh;
  padding: 20px;
  box-sizing: border-box;
  background: #111827;
  border-radius: 16px 16px 0 0;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}
    h2 { text-align: center; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; }
    .linha { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; gap: 10px; }
    label { flex: 1; font-size: 14px; font-weight: bold; }
    input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }
    button { padding: 10px; cursor: pointer; border: none; border-radius: 4px; background: #007bff; color: white; font-weight: bold; }
    button:active { opacity: 0.8; }
    .readonly { background: #e9ecef; color: #495057; }
    .tela { display: none; }
    .tela.ativa { display: block; }
    .menu button { width: 100%; margin-bottom: 10px; padding: 15px; font-size: 16px; text-align: left; }
    .nav { display: flex; justify-content: space-between; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }
    .btn-block { width: 100%; margin-top: 10px; }
    .btn-save { background: #28a745; }
    .btn-danger { background: #dc3545; }
	h2 {
  color: #1f2933;
}

.menu button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  border-radius: 12px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.menu button:active {
  transform: scale(0.98);
}

.tela {
  animation: fadeIn 0.25s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Texto padr√£o claro */
.app, 
.app label, 
.app h2, 
.app p {
  color: #f9fafb;
}

/* Inputs claros sobre fundo escuro */
input {
  background: #f3f4f6;
  color: #111827;
}

/* Campos readonly */
.readonly {
  background: #e5e7eb;
  color: #111827;
}

/* Cards internos */
section > div {
  background: #1f2937 !important;
}

/* ===== MENU V5 - CARDS GRANDES (VALIDADO) ===== */

#menu {
  background: linear-gradient(180deg, #0f172a, #020617);
  min-height: 100vh;
  padding-bottom: 40px;
}

#menu h2 {
  color: #ffffff;
  font-size: 26px;
  text-align: center;
  margin-bottom: 25px;
  border-bottom: 1px solid rgba(255,255,255,0.15);
  padding-bottom: 15px;
}

.card-menu {
  display: flex;
  align-items: center;
  gap: 18px;

  background: #1e293b;
  border-radius: 18px;
  padding: 22px 20px;
  margin-bottom: 18px;

  box-shadow: 0 8px 20px rgba(0,0,0,0.35);
  cursor: pointer;
}

.card-menu:active {
  transform: scale(0.98);
}

.card-icon {
  width: 64px;
  height: 64px;
  border-radius: 14px;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 32px;
  background: #334155;
  flex-shrink: 0;
}

.card-text {
  display: flex;
  flex-direction: column;
}

.card-title {
  font-size: 20px;
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 6px;
}

.card-desc {
  font-size: 16px;
  color: #cbd5f5;
  line-height: 1.4;
}
  </style>
</head>
<body>

<div class="app">
  <section id="menu" class="tela ativa menu">
    <h2>Menu Principal</h2>
    <div class="card-menu" onclick="irPara('inicioTurno')">
  <div class="card-icon">üöó</div>
  <div class="card-text">
    <div class="card-title">Gerenciar Turno</div>
    <div class="card-desc">
      Inicie, registre custos e finalize seu turno
    </div>
  </div>
</div>

<div class="card-menu" onclick="irPara('custos')">
  <div class="card-icon">‚õΩ</div>
  <div class="card-text">
    <div class="card-title">Custos e Ganhos</div>
    <div class="card-desc">
      Abastecimentos, despesas e valor apurado
    </div>
  </div>
</div>

<div class="card-menu" onclick="irPara('fimTurno')">
  <div class="card-icon">‚èπ</div>
  <div class="card-text">
    <div class="card-title">Finalizar Turno</div>
    <div class="card-desc">
      Encerramento do turno e quilometragem final
    </div>
  </div>
</div>

<div class="card-menu" onclick="irPara('resumoDia')">
  <div class="card-icon">üìÖ</div>
  <div class="card-text">
    <div class="card-title">Resumo do Dia</div>
    <div class="card-desc">
      Resultados do dia e valor por hora
    </div>
  </div>
</div>

<div class="card-menu" onclick="irPara('metasMensais')">
  <div class="card-icon">üìà</div>
  <div class="card-text">
    <div class="card-title">Metas Mensais</div>
    <div class="card-desc">
      Acompanhe metas e custos fixos
    </div>
  </div>
</div>

<div class="card-menu" onclick="irPara('historicoGeral')">
  <div class="card-icon">üìö</div>
  <div class="card-text">
    <div class="card-title">Hist√≥rico Geral</div>
    <div class="card-desc">
      Todos os turnos e exporta√ß√µes
    </div>
  </div>
</div>
  </section>

  <section id="inicioTurno" class="tela">
  <h2>In√≠cio de Turno</h2>

  <div class="card">

    <div class="linha">
      <label>Hora de in√≠cio</label>
      <input
        id="horaInicio"
        type="tel"
        placeholder="Ex: 0620"
        maxlength="5"
      >
    </div>

    <div class="linha">
      <label>KM inicial</label>
      <input
        id="kmInicial"
        type="number"
        placeholder="Ex: 28500"
      >
    </div>

    <button class="btn btn-primary" onclick="confirmarInicioTurno()">
      ‚ñ∂ Iniciar Turno
    </button>

  </div>

  <div class="nav">
    <button class="btn" onclick="irPara('menu')">‚¨Ö Voltar</button>
  </div>
</section>

 <section id="custos" class="tela">
  <h2>Custos e Ganhos</h2>

  <div class="card">

    <div class="linha">
      <label>Abastecimento (R$)</label>
      <input id="valorAbastecimento" type="number" step="0.01">
      <button class="btn-icon" onclick="adicionarAbastecimento()">Ôºã</button>
    </div>

    <div class="linha">
      <label>Total Abastecido</label>
      <input id="totalAbastecido" class="readonly" readonly>
    </div>

    <hr>

    <div class="linha">
      <label>Outros Custos (R$)</label>
      <input id="valorOutrosCustos" type="number" step="0.01">
      <button class="btn-icon" onclick="adicionarOutrosCustos()">Ôºã</button>
    </div>

    <div class="linha">
      <label>Total Outros</label>
      <input id="totalOutrosCustos" class="readonly" readonly>
    </div>

    <div class="linha destaque">
      <label>Total de Custos</label>
      <input id="totalCustos" class="readonly" readonly>
    </div>

    <hr>

    <div class="linha">
      <label>Valor Apurado (R$)</label>
      <input id="apurado" type="number" step="0.01">
    </div>

    <button class="btn btn-primary" onclick="inserirApurado()">
      üíæ Salvar Dados
    </button>

  </div>

  <div class="nav">
    <button class="btn" onclick="irPara('menu')">‚¨Ö Menu</button>
    <button class="btn btn-primary" onclick="irPara('fimTurno')">Pr√≥ximo ‚û°</button>
  </div>
</section>

  <section id="fimTurno" class="tela">
    <h2>‚èπ Fim de Turno</h2>
    <div class="linha"><label>Hora Fim</label><input id="horaFim" type="tel" placeholder="HH:MM" maxlength="5"><button onclick="capturarHora('horaFim')">‚è±</button></div>
    <div class="linha"><label>KM Final</label><input id="kmFinal" type="number"></div>
    <button class="btn-block btn-danger" onclick="confirmarFimTurno()">‚èπ Encerrar Turno</button>
    <div class="nav"><button onclick="irPara('menu')">‚¨Ö Menu</button></div>
  </section>

  <section id="resumoTurno" class="tela">
    <h2>üìä Resumo do Turno</h2>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; line-height: 2;">
      <div>Tempo: <strong id="resumoHoras">-</strong></div>
      <div>Rodado: <strong id="resumoKM">-</strong></div>
      <div>Custos: <strong id="resumoCustos">-</strong></div>
      <div>Lucro: <strong id="resumoLucro" style="color:green">-</strong></div>
      <div>Valor/Hora: <strong id="resumoValorHora">-</strong></div>
    </div>
    <button class="btn-block btn-save" style="margin-top:20px" onclick="salvarTurnoNoHistorico()">‚úÖ Arquivar e Limpar para Novo Turno</button>
    <div class="nav"><button onclick="irPara('menu')">‚¨Ö Menu</button></div>
  </section>

  <section id="resumoDia" class="tela">
    <h2>üìÖ Resumo do Dia (Hoje)</h2>
    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; line-height: 2;">
      <p>Intervalo Total: <strong id="diaHorasTrabalhadas">00:00h</strong></p>
      <p>KM Total Rodado: <strong id="diaKM">0 km</strong></p>
      <p>Total Abastecido: <strong id="diaAbastecido">R$ 0.00</strong></p>
      <p>Outros Custos: <strong id="diaOutrosCustos">R$ 0.00</strong></p>
      <p>Valor Apurado: <strong id="diaApurado">R$ 0.00</strong></p>
      <hr>
      <p>Lucro do Dia: <strong id="diaLucro" style="color:green; font-size:1.2em;">R$ 0.00</strong></p>
      <p>Valor M√©dio da Hora: <strong id="diaValorHora">R$ 0.00/h</strong></p>
    </div>
    <div class="nav"><button onclick="irPara('menu')">‚¨Ö Menu</button></div>
  </section>
  
  <section id="metasMensais" class="tela">
    <h2>üìà Metas Mensais</h2>
    <div style="border: 1px solid #007bff; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
      <div class="linha"><label>Valor da Meta Mensal</label><input id="valorMetaMensal" type="number" step="0.01"><button onclick="atualizarMetaMensal()">üíæ Salvar</button></div>
      <button class="btn-block btn-danger" onclick="apagarMetaMensal()" style="font-size:12px; margin-top:-10px; margin-bottom:15px;">Apagar Meta e Custos Fixos</button>
      <hr>
      <div class="linha"><label>Descri√ß√£o Custo Fixo</label><input id="descricaoCustoFixo" type="text" placeholder="Ex: Parcela Carro"></div>
      <div class="linha"><label>Valor R$</label><input id="valorCustoFixo" type="number" step="0.01"><button onclick="inserirCustoFixo()">+</button></div>
      <hr>
      <strong>Lista de Custos Fixos:</strong>
      <ul id="listaCustosFixos" style="list-style: none; padding: 0;"></ul>
      <div class="linha" style="margin-top: 15px;"><label style="font-size: 16px;">Total Custos Fixos</label><input id="totalCustosFixos" class="readonly" type="text" readonly style="font-weight: bold;"></div>
    </div>
    <div style="background: #e9ecef; padding: 15px; border-radius: 5px;">
        <div class="linha"><label>Sua Meta</label><input id="resumoSuaMeta" class="readonly" type="text" readonly></div>
        <div class="linha"><label>Total Custos Fixos</label><input id="resumoTotalCustosFixos" class="readonly" type="text" readonly></div>
        <hr>
        <div class="linha"><label>Lucro do m√™s</label><input id="resumoLucroDoMes" class="readonly" type="text" readonly></div>
        <div class="linha"><label style="font-size: 1.1em; font-weight: bold; color: #dc3545;">Falta Para Atingir a Meta</label><input id="resumoFaltaParaMeta" class="readonly" type="text" readonly style="color: #dc3545; font-size: 1.1em; font-weight: bold;"></div>
    </div>
    <div class="nav"><button onclick="irPara('menu')">‚¨Ö Menu</button></div>
  </section>

  <section id="historicoGeral" class="tela">
    <h2>üìö Hist√≥rico Geral</h2>
    <ul id="listaHistorico" style="list-style: none; padding: 0;"></ul>
    <button class="btn-block" onclick="exportarExcel()">‚¨áÔ∏è Exportar para Excel/CSV</button>
    <button class="btn-block" onclick="exportarPDF()">‚¨áÔ∏è Exportar para PDF</button>
    <button class="btn-block btn-danger" onclick="limparTodoHistorico()" style="font-size:12px">Apagar Todo Hist√≥rico</button>
    <div class="nav"><button onclick="irPara('menu')">‚¨Ö Menu</button></div>
  </section>
</div>
<script src="./app.js"></script>
</body>
</html>









