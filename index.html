<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Controle DiÃ¡rio</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#121212">

  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="./visual.css">

  <!-- LIBS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>

<body>

<div class="app">

  <!-- ================= MENU PRINCIPAL ================= -->
  
  <!--
  <section id="menu" class="tela ativa menu">
    <h2>ğŸ‘‹ Bem-vindo</h2>

    <button onclick="irPara('inicioTurno')">
      <span class="icone">â–¶ï¸</span> Iniciar Turno
    </button>

    <button onclick="irPara('custos')">
      <span class="icone">â›½</span> LanÃ§ar Custos / Ganhos
    </button>

    <button onclick="irPara('fimTurno')">
      <span class="icone">â¹</span> Finalizar Turno
    </button>

    <button onclick="irPara('resumoDia')">
      <span class="icone">ğŸ“…</span> Resumo do Dia
    </button>

    <button onclick="irPara('metasMensais')">
      <span class="icone">ğŸ“ˆ</span> Metas Mensais
    </button>

    <button onclick="irPara('historicoGeral')">
      <span class="icone">ğŸ“š</span> HistÃ³rico Geral
    </button>
  </section>
-->
  <section id="menu" class="tela ativa">
  <div class="header-menu">
    <h1>ğŸš— Controle DiÃ¡rio</h1>
    <p id="dataAtual">--/--/----</p>
    <div id="statusTrabalho" class="status-badge">Off-line</div>
  </div>

  <div class="grid-menu">
    <!-- SÃ³ permite iniciar se NÃƒO houver turno ativo -->
    <button id="btnIrInicio" class="btn-menu btn-save" onclick="irPara('inicioTurno')">
      <span class="icone-g">â–¶ï¸</span>
      <div class="texto-menu"><strong>Iniciar Turno</strong><span>ComeÃ§ar o dia</span></div>
    </button>

    <!-- SÃ³ permite custos/fim se HOUVER turno ativo -->
    <button id="btnIrCustos" class="btn-menu" onclick="irPara('custos')" disabled>
      <span class="icone-g">â›½</span>
      <div class="texto-menu"><strong>Custos</strong><span>LanÃ§ar valores</span></div>
    </button>

    <button id="btnIrFim" class="btn-menu" onclick="irPara('fimTurno')" disabled>
      <span class="icone-g">â¹</span>
      <div class="texto-menu"><strong>Finalizar Turno</strong><span>Encerrar o dia</span></div>
    </button>

    <hr style="border:0; border-top:1px solid #333; margin:10px 0;">

    <button class="btn-menu" onclick="irPara('resumoDia')">
      <span class="icone-g">ğŸ“…</span>
      <div class="texto-menu"><strong>Resumo do Dia</strong><span>Ganhos de hoje</span></div>
    </button>

    <button class="btn-menu" onclick="irPara('metasMensais')">
      <span class="icone-g">ğŸ“ˆ</span>
      <div class="texto-menu"><strong>Metas Mensais</strong><span>Custos Fixos</span></div>
    </button>

    <button class="btn-menu" onclick="irPara('historicoGeral')">
      <span class="icone-g">ğŸ“š</span>
      <div class="texto-menu"><strong>HistÃ³rico</strong><span>RelatÃ³rios</span></div>
    </button>
  </div>
</section>


    <!-- ================= INÃCIO DE TURNO ================= -->
  <section id="inicioTurno" class="tela">
    <h2>â–¶ï¸ InÃ­cio de Turno</h2>

    <div class="linha">
      <label>Hora InÃ­cio</label>
      <input id="horaInicio" type="tel" placeholder="00:00">
    </div>
    
    <!-- BotÃ£o Capturar (Novo PadrÃ£o) -->
    <button class="btn-confirmar" onclick="capturarHora('horaInicio')" style="margin-top: 5px; margin-bottom: 25px;">
      â±ï¸ Capturar hora atual
    </button>

    <div class="linha">
      <label>KM Inicial</label>
      <input id="kmInicial" type="number">
    </div>

    <button class="btn-save" onclick="confirmarInicioTurno()">âœ… Iniciar Turno</button>

    <div class="nav">
      <button onclick="irPara('menu')">â¬…ï¸ Menu</button>
    </div>
  </section>

  <!-- ================= CUSTOS ================= -->
  <section id="custos" class="tela">
    <h2>â›½ Custos e Ganhos</h2>
    <div id="status-salvamento" style="text-align: center; height: 20px; color: #2ecc71; font-weight: bold; opacity: 0; transition: opacity 0.3s;">
  âœ… Registrado com sucesso!
</div>

  <div class="bloco-custo">
  <label class="label-grande">â›½ Custos com CombustÃ­vel</label>

  <input 
    id="valorAbastecimento"
    type="number"
    step="0.01"
    placeholder="Digite o valor abastecido"
    class="input-grande"
  >

  <button 
    class="btn-confirmar"
    onclick="adicionarAbastecimento()"
  >
    âœ… Confirmar CombustÃ­vel
  </button>
</div>

    <div class="linha">
      <label>Total Abastecido</label>
      <input id="totalAbastecido" class="readonly" readonly>
    </div>

   <div class="bloco-custo">
  <label class="label-grande">ğŸ§¾ Outros Custos</label>

  <input 
    id="valorOutrosCustos"
    type="number"
    step="0.01"
    placeholder="Digite o valor do custo"
    class="input-grande"
  >

  <button 
    class="btn-confirmar"
    onclick="adicionarOutrosCustos()"
  >
    âœ… Confirmar Outros Custos
  </button>
</div>

    <div class="linha">
      <label>Total Outros</label>
      <input id="totalOutrosCustos" class="readonly" readonly>
    </div>

    <div class="linha">
      <label>Total Custos</label>
      <input id="totalCustos" class="readonly" readonly>
    </div>

   <div class="nav">
      <button onclick="irPara('menu')">â¬…ï¸ Menu</button>
      <button onclick="irPara('fimTurno')">â¡ï¸ Finalizar</button>
    </div>
  </section>

   <!-- ================= FIM DE TURNO ================= -->
<section id="fimTurno" class="tela">
  <h2>â¹ Finalizar Turno</h2>

  <div class="linha">
    <label>Hora Fim</label>
    <input id="horaFim" type="tel" placeholder="00:00">
  </div>

  <button class="btn-confirmar" onclick="capturarHora('horaFim')">
    â±ï¸ Capturar hora atual
  </button>

  <div class="linha">
    <label>KM Final</label>
    <input id="kmFinal" type="number">
  </div>

  <!-- CAMPO MOVIDO PARA CÃ -->
  <div class="linha" style="margin-top: 20px;">
    <label>Valor Apurado R$</label>
    <input id="apurado" type="number" step="0.01" placeholder="0.00">
  </div>

  <button class="btn-danger" onclick="confirmarFimTurno()" style="margin-top: 20px;">
    â¹ Encerrar Turno
  </button>

  <div class="nav">
    <button onclick="irPara('menu')">â¬…ï¸ Menu</button>
  </div>
</section>

  <!-- ================= RESUMO DO DIA ================= -->
  <section id="resumoDia" class="tela">
    <h2>ğŸ“… Resumo do Dia</h2>

    <div class="box">
      <div>Horas Trabalhadas: <strong id="diaHorasTrabalhadas"></strong></div>
      <div>KM Rodado: <strong id="diaKM"></strong></div>
      <div>Lucro do Dia: <strong id="diaLucro"></strong></div>
    </div>

    <div class="nav">
      <button onclick="irPara('menu')">â¬…ï¸ Menu</button>
    </div>
  </section>

 <!-- ================= METAS MENSAIS (REVISÃƒO TOTAL) ================= -->
<section id="metasMensais" class="tela">
  <h2>ğŸ“ˆ Metas Mensais</h2>

  <!-- Bloco 1: Meta Principal -->
  <div class="box">
    <div class="linha">
      <label>Valor da Meta Mensal</label>
      <input id="valorMetaMensal" type="number" step="0.01" placeholder="Ex: 5000.00">
    </div>
    
    <button class="btn-save" onclick="atualizarMetaMensal()">
      ğŸ’¾ Salvar Meta
    </button>
    
    <button class="btn-danger" onclick="apagarMetaMensal()" style="height: 45px; font-size: 14px; margin-top: 10px;">
      ğŸ—‘ï¸ Limpar Tudo (Meta e Fixos)
    </button>
  </div>

  <!-- Bloco 2: Cadastro de Custos Fixos -->
  <div class="box">
    <h3>ğŸ“Œ Novo Custo Fixo</h3>
    
    <div class="linha">
      <label>DescriÃ§Ã£o do Custo</label>
      <input id="descricaoCustoFixo" type="text" placeholder="Ex: Parcela Carro">
    </div>

    <div class="linha">
      <label>Valor R$</label>
      <input id="valorCustoFixo" type="number" step="0.01">
    </div>

    <button class="btn-confirmar" onclick="inserirCustoFixo()">
      â• Adicionar Custo
    </button>

    <hr style="border: 0; border-top: 1px solid #444; margin: 25px 0;">
    
    <strong>Lista de Custos Fixos:</strong>
    <!-- A lista agora serÃ¡ estilizada via CSS para evitar confusÃ£o -->
    <ul id="listaCustosFixos" class="lista-limpa"></ul>

    <div class="linha" style="margin-top: 20px;">
      <label>Total Custos Fixos</label>
      <input id="totalCustosFixos" class="readonly" type="text" readonly>
    </div>
  </div>

  <div class="nav">
    <button onclick="irPara('menu')">â¬…ï¸ Menu Principal</button>
  </div>
</section>

  <!-- ================= HISTÃ“RICO ================= -->
  <section id="historicoGeral" class="tela">
    <h2>ğŸ“š HistÃ³rico Geral</h2>
    <ul id="listaHistorico"></ul>

    <button onclick="exportarExcel()">â¬‡ï¸ Exportar Excel</button>
    <button onclick="exportarPDF()">â¬‡ï¸ Exportar PDF</button>
    <button class="btn-danger" onclick="limparTodoHistorico()">ğŸ—‘ Apagar HistÃ³rico</button>

    <div class="nav">
      <button onclick="irPara('menu')">â¬…ï¸ Menu</button>
    </div>
  </section>

</div>

<script src="./app.js"></script>
</body>
</html>











